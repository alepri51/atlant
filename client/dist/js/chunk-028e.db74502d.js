(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-028e","chunk-1c5c","4074"],{"0042":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("widget",{attrs:{name:"календарь"}},[i("v-card",{attrs:{flat:"","fill-height":""}},[i("v-card-text",{staticClass:"pa-2"},[i("v-date-picker",{staticClass:"elevation-0",attrs:{"header-color":"primary",color:"secondary","full-width":"",locale:"ru-ru","show-current":t.today,landscape:t.landscape,reactive:t.reactive,flat:"","event-color":function(t){return t[9]%2?"red":"blue"},events:t.events,"allowed-dates":t.allowedDates,"first-day-of-week":"1"},model:{value:t.picker,callback:function(e){t.picker=e},expression:"picker"}})],1),i("v-divider"),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{flat:"",color:"secondary"},on:{click:function(e){t.$emit("date-changed",void 0),t.picker=void 0}}},[t._v("Сбросить")])],1)],1)],1)},n=[],s=i("a8bd"),o={extends:s["default"],data:()=>{let t=new Date;return t.setTime(t.getTime()-60*t.getTimezoneOffset()*1e3),{current_date:t,today:t.toISOString().slice(0,10),picker:void 0,landscape:!1,reactive:!0,events:["2018-07-10","2018-07-11","2018-07-21"]}},created(){let t=new Date;t.setTime(t.getTime()-60*t.getTimezoneOffset()*1e3)},methods:{allowedDates:t=>!0},watch:{picker:function(t){this.$emit("date-changed",t)}}},c=o,r=(i("a866"),i("2877")),d=Object(r["a"])(c,a,n,!1,null,"3f93ae44",null);d.options.__file="calendar.vue";e["default"]=d.exports},4074:function(t,e,i){"use strict";i.r(e),e["default"]={data(){let[t,e]=this.$options._componentTag.split("_");return{loaded:!1,events:{},entity:t,component_name:this.$options._componentTag,component_id:e||this.$store.state.route.id}},async created(){},watch:{"auth.signed":function(t,e){}},methods:{execute(...t){return this.$store._actions.execute[0](...t)},commit(...t){return this.$store.commit(...t)},registerComponent(t){this.commit("REGISTER_COMPONENT",t)}},computed:{state(){return this.$store.state},entities(){return this.$store.state.entities},auth(){return this.state.auth||{}},authenticated(){return!!this.auth&&(this.auth.signed&&0!==this.auth.signed)},route(){return this.state.route},BASE_URL(){return this.state.BASE_URL}}}},"46d7":function(t,e,i){},a866:function(t,e,i){"use strict";var a=i("46d7"),n=i.n(a);n.a},a8bd:function(t,e,i){"use strict";i.r(e);var a=i("4074");e["default"]={extends:a["default"],components:{widget:()=>i.e("chunk-6ce8").then(i.bind(null,"a739"))},data(){return{active:!1}},activated(){this.active=!0,this.load()},deactivated(){this.active=!1},methods:{load(){if(this.active&&this.execute({endpoint:this.endpoint,method:"get",cache:this.cache}),1===this.auth.signed&&this.auth.member){console.log("REGISTER EVENT:",`${this.auth.member}:update:${this.entity}`),this.$socket.off(this.events.update);let t=`${this.auth.member}:update:${this.entity}`;this.$socket.on(t,t=>{this.onEvent(t)});this.events.update=t}},onEvent(t){console.log("SOCKET UPDATE DATA:",t),this.commit("SET_ENTITIES",{method:"GET",...t})}},computed:{cache(){return!0},endpoint(){return`${this.entity}${this.component_id?":"+this.component_id:""}`},raw_data(){return this.$store.state.entities[this.entity]?Object.values(this.$store.state.entities[this.entity]):[]},filter(){return this.raw_data}},watch:{"auth.signed":function(t,e){1===t&&this.load()},"auth.member":function(t,e){!t&&this.$socket.off(this.events.update)}}}}}]);
//# sourceMappingURL=chunk-028e.db74502d.js.map