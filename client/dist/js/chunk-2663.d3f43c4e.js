(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2663","chunk-1c5c","4074"],{"1cc0":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.item?i("widget",{attrs:{name:"новость"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("v-layout",{staticClass:"ma-2",attrs:{column:""}},[i("sui-card-meta",[i("small",[t._v(t._s(new Date(parseInt(t.item.created)).toLocaleString()))])]),i("h2",{staticClass:"primary--text ma-0"},[i("v-icon",{staticClass:"mr-2 shadow",attrs:{color:"primary",medium:""}},[t._v("fas fa-exclamation-circle")]),t._v("\n                "+t._s(t.item.title)+"\n            ")],1),t.item.tags&&t.item.tags.length?i("div",{staticClass:"mt-2",staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"inline-block"}},[i("v-icon",{staticClass:"mr-1 secondary--text",attrs:{small:""}},[t._v("fas fa-tags")]),t._v("\n                "+t._s(t.item.tags.reduce(function(t,e,i,s){return t+e+(i===s.length-1?"":" | ")},""))+"\n            ")],1):t._e()],1),"admins"===t.auth.group?i("v-btn",{staticClass:"top-dial",attrs:{absolute:"",right:"",dark:"",fab:"",color:"accent"},on:{click:function(e){t.commit("SHOW_MODAL",{news:t.item})}}},[i("v-icon",[t._v("fas fa-pen")]),i("v-icon",[t._v("fas fa-feather-alt")])],1):t._e()],1),i("v-divider",{staticClass:"mb-2",attrs:{slot:"divider"},slot:"divider"}),i("v-card",{attrs:{flat:"",tile:"",width:"100%"}},[i("sui-card",{staticStyle:{width:"100%"}},[t.item.video_url?i("sui-embed",{attrs:{icon:"fas fa-film",id:t.item.video_id,placeholder:t.item.compressed?t.BASE_URL+"/"+t.item._id+"/files/"+t.item.compressed:"https://placeimg.com/500/"+(400+t.item._id)+"/nature",source:t.item.video_provider,iframe:{allowFullScreen:!0,allowfullscreen:!0,mozallowfullscreen:!0,webkitallowfullscreen:!0}}}):t.item.compressed?i("v-card-media",{attrs:{height:"30vh",src:t.item.compressed?t.BASE_URL+"/"+t.item._id+"/files/"+t.item.compressed:""}}):i("v-card-media",{attrs:{height:"30vh",src:"https://placeimg.com/500/"+(500+t.item._id)+"/nature"}})],1),i("v-card-text",{staticStyle:{flex:"1"},domProps:{innerHTML:t._s(t.item.text)}})],1)],1):t._e()},a=[],n=i("a8bd"),o={extends:n["default"],components:{},created(){},computed:{endpoint(){return`${this.component_name}${this.component_id?":"+this.component_id:""}`},item(){return this.raw_data.filter(t=>t._id===this.state.route.id)[0]}},methods:{},data(){return{entity:"news"}}},r=o,c=(i("4856"),i("2877")),d=Object(c["a"])(r,s,a,!1,null,"53f4d24c",null);d.options.__file="singlenews.vue";e["default"]=d.exports},4074:function(t,e,i){"use strict";i.r(e),e["default"]={data(){let[t,e]=this.$options._componentTag.split("_");return{loaded:!1,events:{},entity:t,component_name:this.$options._componentTag,component_id:e||this.$store.state.route.id}},async created(){},watch:{"auth.signed":function(t,e){}},methods:{execute(...t){return this.$store._actions.execute[0](...t)},commit(...t){return this.$store.commit(...t)},registerComponent(t){this.commit("REGISTER_COMPONENT",t)}},computed:{state(){return this.$store.state},entities(){return this.$store.state.entities},auth(){return this.state.auth||{}},authenticated(){return!!this.auth&&(this.auth.signed&&0!==this.auth.signed)},route(){return this.state.route},BASE_URL(){return this.state.BASE_URL}}}},4856:function(t,e,i){"use strict";var s=i("5359"),a=i.n(s);a.a},5359:function(t,e,i){},a8bd:function(t,e,i){"use strict";i.r(e);var s=i("4074");e["default"]={extends:s["default"],components:{widget:()=>i.e("chunk-6ce8").then(i.bind(null,"a739"))},data(){return{active:!1}},activated(){this.active=!0,this.load()},deactivated(){this.active=!1},methods:{load(){if(this.active&&this.execute({endpoint:this.endpoint,method:"get",cache:this.cache}),1===this.auth.signed&&this.auth.member){console.log("REGISTER EVENT:",`${this.auth.member}:update:${this.entity}`),this.$socket.off(this.events.update);let t=`${this.auth.member}:update:${this.entity}`;this.$socket.on(t,t=>{this.onEvent(t)});this.events.update=t}},onEvent(t){console.log("SOCKET UPDATE DATA:",t),this.commit("SET_ENTITIES",{method:"GET",...t})}},computed:{cache(){return!0},endpoint(){return`${this.entity}${this.component_id?":"+this.component_id:""}`},raw_data(){return this.$store.state.entities[this.entity]?Object.values(this.$store.state.entities[this.entity]):[]},filter(){return this.raw_data}},watch:{"auth.signed":function(t,e){1===t&&this.load()},"auth.member":function(t,e){!t&&this.$socket.off(this.events.update)}}}}}]);
//# sourceMappingURL=chunk-2663.d3f43c4e.js.map