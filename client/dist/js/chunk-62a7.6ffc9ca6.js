(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62a7","chunk-1c5c","4074"],{4074:function(t,e,a){"use strict";a.r(e),e["default"]={data(){let[t,e]=this.$options._componentTag.split("_");return{loaded:!1,events:{},entity:t,component_name:this.$options._componentTag,component_id:e||this.$store.state.route.id}},async created(){},watch:{"auth.signed":function(t,e){}},methods:{execute(...t){return this.$store._actions.execute[0](...t)},commit(...t){return this.$store.commit(...t)},registerComponent(t){this.commit("REGISTER_COMPONENT",t)}},computed:{state(){return this.$store.state},entities(){return this.$store.state.entities},auth(){return this.state.auth||{}},authenticated(){return!!this.auth&&(this.auth.signed&&0!==this.auth.signed)},route(){return this.state.route},BASE_URL(){return this.state.BASE_URL}}}},a134:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("widget",{attrs:{name:"новости ("+t.filter.length+")",wrap:"","justify-center":""}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("v-layout",{staticClass:"ma-2"},[a("h2",{staticClass:"primary--text"},[a("v-icon",{staticClass:"mr-2 shadow",attrs:{color:"primary",medium:""}},[t._v("fas fa-exclamation-circle")]),t._v("\n                "+t._s("Новости платформы "+(t.date?"на "+new Date(t.date).toLocaleDateString():"")+":")+"\n            ")],1),"admins"===t.auth.group?a("v-speed-dial",{staticClass:"top-dial",attrs:{absolute:"",right:"",direction:"bottom","open-on-hover":!0,transition:t.transition},model:{value:t.append,callback:function(e){t.append=e},expression:"append"}},[a("v-btn",{attrs:{slot:"activator",dark:"",fab:"",color:"accent"},slot:"activator",model:{value:t.append,callback:function(e){t.append=e},expression:"append"}},[a("v-icon",[t._v(" fas fa-plus")]),a("v-icon",[t._v("fas fa-times")])],1),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"secondary"},on:{click:function(e){t.commit("SHOW_MODAL",{news:void 0})}}},[a("v-tooltip",{attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator"},slot:"activator"},[t._v("far fa-newspaper")]),a("span",[t._v("Добавить новость")])],1)],1),a("v-btn",{attrs:{fab:"",dark:"",small:"",color:"secondary"},on:{click:function(e){t.commit("SHOW_MODAL",{news:void 0})}}},[a("v-tooltip",{attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator"},slot:"activator"},[t._v("far fa-calendar-alt")]),a("span",[t._v("Добавить событие")])],1)],1)],1):t._e()],1)],1),a("v-divider",{staticClass:"mb-4",attrs:{slot:"divider"},slot:"divider"}),t._l(t.filter,function(e){return t.filter.length?a("v-flex",{key:e._id,staticStyle:{"max-width":"300px"}},[a("sui-card",{class:{"elevation-1":t.active!==e._id,"elevation-10":t.active===e._id},staticStyle:{width:"300px!important"},on:{click:function(a){t.clicked=e._id},mouseover:function(a){t.active=e._id},mouseout:function(e){t.active=!1}}},[e.video_url?a("sui-embed",{attrs:{active:e._id===t.clicked,icon:"fas fa-film",id:e.video_id,placeholder:e.compressed?t.BASE_URL+"/"+e._id+"/files/"+e.compressed:"https://placeimg.com/150/"+(100+e._id)+"/nature",source:e.video_provider,iframe:{allowFullScreen:!0,allowfullscreen:!0,mozallowfullscreen:!0,webkitallowfullscreen:!0}}}):e.compressed?a("v-card-media",{attrs:{height:159.75,src:e.compressed?t.BASE_URL+"/"+e._id+"/files/"+e.compressed:""}}):a("v-card-media",{attrs:{height:159.75,src:"https://placeimg.com/150/"+(100+e._id)+"/nature"}}),a("sui-card-content",[a("sui-card-header",{class:e._id===t.active?"accent--text":"primary--text",attrs:{alt:e.title}},[t._v(t._s(e.title))]),a("sui-card-meta",[a("small",[t._v(t._s(new Date(parseInt(e.created)).toLocaleString()))])]),a("v-divider"),a("sui-card-description",{domProps:{innerHTML:t._s(e.text)}})],1),a("sui-card-content",{attrs:{extra:""}},[e.tags&&e.tags.length?a("div",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",display:"inline-block","max-width":"120px"}},[a("v-icon",{staticClass:"mr-1 secondary--text",attrs:{size:12}},[t._v("fas fa-tags")]),a("small",[t._v(t._s(e.tags.reduce(function(t,e,a,i){return t+e+(a===i.length-1?"":" | ")},"")))])],1):t._e(),a("v-btn",{staticClass:"ma-0",attrs:{slot:"right",to:"readnews:"+e._id,dark:"",flat:"",color:"secondary",icon:"",small:""},on:{click:function(t){t.stopPropagation()}},slot:"right"},[a("v-icon",{attrs:{small:""}},[t._v("fas fa-expand")])],1)],1),"admins"===t.auth.group?a("v-speed-dial",{directives:[{name:"show",rawName:"v-show",value:e._id===t.active,expression:"item._id === active"}],staticClass:"card-dial",attrs:{absolute:"",bottom:t.bottom,right:t.right,left:t.left,direction:t.direction,"open-on-hover":t.hover,transition:t.transition},model:{value:t.fab[e._id],callback:function(a){t.$set(t.fab,e._id,a)},expression:"fab[item._id]"}},[a("v-btn",{style:!t.fab[e._id]&&"opacity: 0.5",attrs:{slot:"activator",dark:"",fab:"",small:"",color:"accent"},slot:"activator",model:{value:t.fab[e._id],callback:function(a){t.$set(t.fab,e._id,a)},expression:"fab[item._id]"}},[a("v-icon",[t._v("fas fa-chevron-down")]),a("v-icon",[t._v("fas fa-chevron-up")])],1),a("v-btn",{staticClass:"btn-icon-shadow",attrs:{icon:"",dark:"",small:"",color:"secondary"},on:{click:function(a){t.commit("SHOW_MODAL",{news:e})}}},[a("v-tooltip",{attrs:{left:""}},[a("v-icon",{staticStyle:{"margin-bottom":"1px"},attrs:{slot:"activator",size:13},slot:"activator"},[t._v("fas fa-pen")]),a("span",[t._v("Редактировать")])],1)],1),a("v-btn",{staticClass:"btn-icon-shadow",attrs:{icon:"",dark:"",small:"",color:"error"},nativeOn:{click:function(a){t.commit("SHOW_MODAL",{news:e,options:{remove:!0}})}}},[a("v-tooltip",{attrs:{left:""}},[a("v-icon",{attrs:{slot:"activator",small:""},slot:"activator"},[t._v("fas fa-times")]),a("span",[t._v("Удалить")])],1)],1)],1):t._e()],1)],1):t._e()}),t.filter.length?t._e():a("v-flex",[a("sui-card",{staticClass:"elevation-0 not-found"},[a("sui-card-content",[a("sui-card-header",[t._v(t._s(t.date?"Новостей за "+new Date(t.date).toLocaleDateString()+" не найдено":""))])],1)],1)],1)],2)},s=[],o=a("a8bd"),n={props:["date"],extends:o["default"],components:{},created(){},computed:{filter(){let t=this.raw_data;return t=this.date?this.raw_data.filter(t=>new Date(parseInt(t.created)).toDateString()===new Date(this.date).toDateString()):this.raw_data,t.sort((t,e)=>e.created-t.created)}},methods:{tags(t){return t.tags.reduce((t,e,a)=>t+=e,"")},onHover(t){this.value[t]=!0,this.active=t}},watch:{append:function(t){t&&this.onHover(0)}},data(){return{append:!1,active:!1,clicked:!1,value:{},direction:"bottom",fab:{},hover:!0,top:!0,right:!0,bottom:!1,left:!1,transition:"slide-y-reverse-transition"}}},r=n,c=(a("b6dd"),a("2877")),d=Object(c["a"])(r,i,s,!1,null,"793203bf",null);d.options.__file="news.vue";e["default"]=d.exports},a8bd:function(t,e,a){"use strict";a.r(e);var i=a("4074");e["default"]={extends:i["default"],components:{widget:()=>a.e("chunk-6ce8").then(a.bind(null,"a739"))},data(){return{active:!1}},activated(){this.active=!0,this.load()},deactivated(){this.active=!1},methods:{load(){if(this.active&&this.execute({endpoint:this.endpoint,method:"get",cache:this.cache}),1===this.auth.signed&&this.auth.member){console.log("REGISTER EVENT:",`${this.auth.member}:update:${this.entity}`),this.$socket.off(this.events.update);let t=`${this.auth.member}:update:${this.entity}`;this.$socket.on(t,t=>{this.onEvent(t)});this.events.update=t}},onEvent(t){console.log("SOCKET UPDATE DATA:",t),this.commit("SET_ENTITIES",{method:"GET",...t})}},computed:{cache(){return!0},endpoint(){return`${this.entity}${this.component_id?":"+this.component_id:""}`},raw_data(){return this.$store.state.entities[this.entity]?Object.values(this.$store.state.entities[this.entity]):[]},filter(){return this.raw_data}},watch:{"auth.signed":function(t,e){1===t&&this.load()},"auth.member":function(t,e){!t&&this.$socket.off(this.events.update)}}}},b6dd:function(t,e,a){"use strict";var i=a("d437"),s=a.n(i);s.a},d437:function(t,e,a){}}]);
//# sourceMappingURL=chunk-62a7.6ffc9ca6.js.map