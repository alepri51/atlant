{"version":3,"sources":["webpack:///./src/components/class_base.js","webpack:///./src/components/widgets/news.vue?5ab6","webpack:///src/components/widgets/news.vue","webpack:///./src/components/widgets/news.vue?18e7","webpack:///./src/components/widgets/news.vue","webpack:///./src/components/widgets/class_widget.js","webpack:///./src/components/widgets/news.vue?6baa"],"names":["__webpack_exports__","[object Object]","entity","id","this","$options","_componentTag","split","loaded","events","component_name","component_id","$store","state","route","watch","auth.signed","val","old","methods","args","_actions","execute","commit","name","computed","entities","auth","signed","BASE_URL","render","_vm","_h","$createElement","_c","_self","attrs","filter","wrap","justify-center","slot","staticClass","color","medium","_v","_s","date","Date","toLocaleDateString","group","absolute","right","direction","open-on-hover","transition","model","value","callback","$$v","append","expression","dark","fab","small","on","click","$event","news","left","_e","_l","item","key","_id","staticStyle","max-width","class","elevation-1","active","elevation-10","width","clicked","mouseover","mouseout","icon","video_id","placeholder","compressed","source","video_provider","iframe","allowFullScreen","allowfullscreen","mozallowfullscreen","webkitallowfullscreen","height","src","alt","title","parseInt","created","toLocaleString","domProps","innerHTML","text","extra","tags","length","overflow","white-space","text-overflow","display","size","reduce","str","inx","arr","to","flat","stopPropagation","directives","rawName","bottom","hover","$set","style","margin-bottom","nativeOn","options","remove","staticRenderFns","newsvue_type_script_lang_js_","props","extends","class_widget","components","raw_data","toDateString","sort","a","b","onHover","top","widgets_newsvue_type_script_lang_js_","component","Object","componentNormalizer","__file","_class_base__WEBPACK_IMPORTED_MODULE_0__","widget","__webpack_require__","e","then","bind","load","endpoint","method","cache","member","console","log","$socket","off","update","event","data","onEvent","values","auth.member","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_news_vue_vue_type_style_index_0_id_793203bf_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-62a7.6ffc9ca6.js","sourcesContent":["\r\nexport default {\r\n    data() {\r\n        let [entity, id] = this.$options._componentTag.split('_');\r\n\r\n        return {\r\n            loaded: false,\r\n            events: {},\r\n            entity,\r\n            component_name: this.$options._componentTag,\r\n            component_id: id || this.$store.state.route.id\r\n        }\r\n    },\r\n    async created() {\r\n\r\n        /* if(this.auth.member) {\r\n            //console.log('REGISTER EVENT:', `${this.auth.member}:update:${this.entity}`);\r\n\r\n            this.$socket.off(this.events.update);\r\n\r\n            let update = this.$socket.on(`${this.auth.member}:update:${this.entity}`, (data) => {\r\n                //console.log('SOCKET UPDATE DATA:', data);\r\n                \r\n                this.commit('SET_ENTITIES', { method: 'GET', ...data });\r\n            });\r\n\r\n            this.events.update = update.id;\r\n        } */\r\n    },\r\n    watch: {\r\n        'auth.signed': function(val, old) {\r\n            //[0, 1].includes(val) && this.commit('RESET_CACHE');\r\n            //val === 0 && this.commit('RESET_ENTITIES');\r\n            //old === 0 && val === 1 && this.commit('RESET_ENTITIES');\r\n        }\r\n    },\r\n    methods: {\r\n        execute(...args) {\r\n            return this.$store._actions.execute[0](...args);\r\n        },\r\n        commit(...args) {\r\n            return this.$store.commit(...args);\r\n        },\r\n        registerComponent(name) {\r\n            this.commit('REGISTER_COMPONENT', name);\r\n        }\r\n    },\r\n    computed: {\r\n        state() {\r\n            return this.$store.state;\r\n        },\r\n        entities() {\r\n            return this.$store.state.entities;\r\n        },\r\n        auth() {\r\n            return this.state.auth || {};\r\n        },\r\n        authenticated() {\r\n            //debugger;\r\n            return this.auth ? this.auth.signed && this.auth.signed !== 0 : false;\r\n        },\r\n        route() {\r\n            return this.state.route;\r\n        },\r\n        BASE_URL() {\r\n            return this.state.BASE_URL;\r\n        }\r\n    }\r\n}\r\n\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('widget',{attrs:{\"name\":(\"новости (\" + (_vm.filter.length) + \")\"),\"wrap\":\"\",\"justify-center\":\"\"}},[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('v-layout',{staticClass:\"ma-2\"},[_c('h2',{staticClass:\"primary--text\"},[_c('v-icon',{staticClass:\"mr-2 shadow\",attrs:{\"color\":\"primary\",\"medium\":\"\"}},[_vm._v(\"fas fa-exclamation-circle\")]),_vm._v(\"\\n                \"+_vm._s((\"Новости платформы \" + (_vm.date ? 'на ' + new Date(_vm.date).toLocaleDateString() : '') + \":\"))+\"\\n            \")],1),(_vm.auth.group === 'admins')?_c('v-speed-dial',{staticClass:\"top-dial\",attrs:{\"absolute\":\"\",\"right\":\"\",\"direction\":\"bottom\",\"open-on-hover\":true,\"transition\":_vm.transition},model:{value:(_vm.append),callback:function ($$v) {_vm.append=$$v},expression:\"append\"}},[_c('v-btn',{attrs:{\"slot\":\"activator\",\"dark\":\"\",\"fab\":\"\",\"color\":\"accent\"},slot:\"activator\",model:{value:(_vm.append),callback:function ($$v) {_vm.append=$$v},expression:\"append\"}},[_c('v-icon',[_vm._v(\" fas fa-plus\")]),_c('v-icon',[_vm._v(\"fas fa-times\")])],1),_c('v-btn',{attrs:{\"fab\":\"\",\"dark\":\"\",\"small\":\"\",\"color\":\"secondary\"},on:{\"click\":function($event){_vm.commit('SHOW_MODAL', { 'news': void 0 })}}},[_c('v-tooltip',{attrs:{\"left\":\"\"}},[_c('v-icon',{attrs:{\"slot\":\"activator\"},slot:\"activator\"},[_vm._v(\"far fa-newspaper\")]),_c('span',[_vm._v(\"Добавить новость\")])],1)],1),_c('v-btn',{attrs:{\"fab\":\"\",\"dark\":\"\",\"small\":\"\",\"color\":\"secondary\"},on:{\"click\":function($event){_vm.commit('SHOW_MODAL', { 'news': void 0 })}}},[_c('v-tooltip',{attrs:{\"left\":\"\"}},[_c('v-icon',{attrs:{\"slot\":\"activator\"},slot:\"activator\"},[_vm._v(\"far fa-calendar-alt\")]),_c('span',[_vm._v(\"Добавить событие\")])],1)],1)],1):_vm._e()],1)],1),_c('v-divider',{staticClass:\"mb-4\",attrs:{\"slot\":\"divider\"},slot:\"divider\"}),_vm._l((_vm.filter),function(item){return (_vm.filter.length)?_c('v-flex',{key:item._id,staticStyle:{\"max-width\":\"300px\"}},[_c('sui-card',{class:{ 'elevation-1': _vm.active !== item._id, 'elevation-10': _vm.active === item._id },staticStyle:{\"width\":\"300px!important\"},on:{\"click\":function($event){_vm.clicked = item._id},\"mouseover\":function($event){_vm.active = item._id},\"mouseout\":function($event){_vm.active = false}}},[(item.video_url)?_c('sui-embed',{attrs:{\"active\":item._id === _vm.clicked,\"icon\":\"fas fa-film\",\"id\":item.video_id,\"placeholder\":item.compressed ? (_vm.BASE_URL + \"/\" + (item._id) + \"/files/\" + (item.compressed)) : (\"https://placeimg.com/150/\" + (100 + item._id) + \"/nature\"),\"source\":item.video_provider,\"iframe\":{ allowFullScreen: true, allowfullscreen: true, mozallowfullscreen: true, webkitallowfullscreen: true}}}):(item.compressed)?_c('v-card-media',{attrs:{\"height\":159.75,\"src\":item.compressed ? (_vm.BASE_URL + \"/\" + (item._id) + \"/files/\" + (item.compressed)) : ''}}):_c('v-card-media',{attrs:{\"height\":159.75,\"src\":(\"https://placeimg.com/150/\" + (100 + item._id) + \"/nature\")}}),_c('sui-card-content',[_c('sui-card-header',{class:item._id === _vm.active ? 'accent--text' : 'primary--text',attrs:{\"alt\":item.title}},[_vm._v(_vm._s(item.title))]),_c('sui-card-meta',[_c('small',[_vm._v(_vm._s(new Date(parseInt(item.created)).toLocaleString()))])]),_c('v-divider'),_c('sui-card-description',{domProps:{\"innerHTML\":_vm._s(item.text)}})],1),_c('sui-card-content',{attrs:{\"extra\":\"\"}},[(item.tags && item.tags.length)?_c('div',{staticStyle:{\"overflow\":\"hidden\",\"white-space\":\"nowrap\",\"text-overflow\":\"ellipsis\",\"display\":\"inline-block\",\"max-width\":\"120px\"}},[_c('v-icon',{staticClass:\"mr-1 secondary--text\",attrs:{\"size\":12}},[_vm._v(\"fas fa-tags\")]),_c('small',[_vm._v(_vm._s(item.tags.reduce(function (str, item, inx, arr) { return str = str + item + (inx === arr.length - 1 ? '' : ' | '); }, '')))])],1):_vm._e(),_c('v-btn',{staticClass:\"ma-0\",attrs:{\"slot\":\"right\",\"to\":(\"readnews:\" + (item._id)),\"dark\":\"\",\"flat\":\"\",\"color\":\"secondary\",\"icon\":\"\",\"small\":\"\"},on:{\"click\":function($event){$event.stopPropagation();}},slot:\"right\"},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"fas fa-expand\")])],1)],1),(_vm.auth.group === 'admins')?_c('v-speed-dial',{directives:[{name:\"show\",rawName:\"v-show\",value:(item._id === _vm.active),expression:\"item._id === active\"}],staticClass:\"card-dial\",attrs:{\"absolute\":\"\",\"bottom\":_vm.bottom,\"right\":_vm.right,\"left\":_vm.left,\"direction\":_vm.direction,\"open-on-hover\":_vm.hover,\"transition\":_vm.transition},model:{value:(_vm.fab[item._id]),callback:function ($$v) {_vm.$set(_vm.fab, item._id, $$v)},expression:\"fab[item._id]\"}},[_c('v-btn',{style:(!_vm.fab[item._id] && 'opacity: 0.5'),attrs:{\"slot\":\"activator\",\"dark\":\"\",\"fab\":\"\",\"small\":\"\",\"color\":\"accent\"},slot:\"activator\",model:{value:(_vm.fab[item._id]),callback:function ($$v) {_vm.$set(_vm.fab, item._id, $$v)},expression:\"fab[item._id]\"}},[_c('v-icon',[_vm._v(\"fas fa-chevron-down\")]),_c('v-icon',[_vm._v(\"fas fa-chevron-up\")])],1),_c('v-btn',{staticClass:\"btn-icon-shadow\",attrs:{\"icon\":\"\",\"dark\":\"\",\"small\":\"\",\"color\":\"secondary\"},on:{\"click\":function($event){_vm.commit('SHOW_MODAL', { 'news': item })}}},[_c('v-tooltip',{attrs:{\"left\":\"\"}},[_c('v-icon',{staticStyle:{\"margin-bottom\":\"1px\"},attrs:{\"slot\":\"activator\",\"size\":13},slot:\"activator\"},[_vm._v(\"fas fa-pen\")]),_c('span',[_vm._v(\"Редактировать\")])],1)],1),_c('v-btn',{staticClass:\"btn-icon-shadow\",attrs:{\"icon\":\"\",\"dark\":\"\",\"small\":\"\",\"color\":\"error\"},nativeOn:{\"click\":function($event){_vm.commit('SHOW_MODAL', { 'news': item, options: { remove: true }})}}},[_c('v-tooltip',{attrs:{\"left\":\"\"}},[_c('v-icon',{attrs:{\"slot\":\"activator\",\"small\":\"\"},slot:\"activator\"},[_vm._v(\"fas fa-times\")]),_c('span',[_vm._v(\"Удалить\")])],1)],1)],1):_vm._e()],1)],1):_vm._e()}),(!_vm.filter.length)?_c('v-flex',[_c('sui-card',{staticClass:\"elevation-0 not-found\"},[_c('sui-card-content',[_c('sui-card-header',[_vm._v(_vm._s(_vm.date ? (\"Новостей за \" + (new Date(_vm.date).toLocaleDateString()) + \" не найдено\") : ''))])],1)],1)],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <widget :name=\"`новости (${filter.length})`\" wrap justify-center>\r\n        <div slot=\"header\">\r\n            <v-layout class=\"ma-2\">\r\n                <h2 class=\"primary--text\">\r\n                    <v-icon color=\"primary\" medium class=\"mr-2 shadow\">fas fa-exclamation-circle</v-icon>\r\n                    {{ `Новости платформы ${ date ? 'на ' + new Date(date).toLocaleDateString() : '' }:` }}\r\n                </h2>\r\n                <v-speed-dial \r\n                    v-if=\"auth.group === 'admins'\"\r\n                    class=\"top-dial\" \r\n                    absolute\r\n                    v-model=\"append\"\r\n                    \r\n                    \r\n                    right\r\n\r\n                    direction=\"bottom\"\r\n                    :open-on-hover=\"true\"\r\n\r\n                    :transition=\"transition\"\r\n                >\r\n                    <v-btn\r\n                        slot=\"activator\"\r\n                        v-model=\"append\"\r\n                        \r\n\r\n                        dark\r\n                        fab\r\n                        color=\"accent\"\r\n                    >\r\n                        <v-icon> fas fa-plus</v-icon>\r\n                        <!-- <v-icon :size=\"10\" v-show=\"!append\" color=\"secondary\">fas fa-user</v-icon> -->\r\n\r\n                        <v-icon>fas fa-times</v-icon>\r\n                    </v-btn>\r\n                    <v-btn\r\n                        fab\r\n                        dark\r\n                        small\r\n                        color=\"secondary\"\r\n                        @click=\"commit('SHOW_MODAL', { 'news': void 0 })\"\r\n                    >\r\n                        <v-tooltip left>\r\n                            <v-icon slot=\"activator\">far fa-newspaper</v-icon>\r\n                            <span>Добавить новость</span>\r\n                        </v-tooltip>\r\n                    </v-btn>\r\n                    <v-btn\r\n                        fab\r\n                        dark\r\n                        small\r\n                        color=\"secondary\"\r\n                        @click=\"commit('SHOW_MODAL', { 'news': void 0 })\"\r\n                    >\r\n                        <v-tooltip left>\r\n                            <v-icon slot=\"activator\">far fa-calendar-alt</v-icon>\r\n                            <span>Добавить событие</span>\r\n                        </v-tooltip>\r\n                    </v-btn>\r\n                </v-speed-dial>\r\n            </v-layout>   \r\n        </div>\r\n\r\n        \r\n\r\n        <v-divider slot=\"divider\" class=\"mb-4\"/>\r\n\r\n        <v-flex v-if=\"filter.length\" v-for=\"item in filter\" :key=\"item._id\" style=\"max-width: 300px\">\r\n            <sui-card style=\"width: 300px!important\" :class=\"{ 'elevation-1': active !== item._id, 'elevation-10': active === item._id }\" @click=\"clicked = item._id\" @mouseover=\"active = item._id\" @mouseout=\"active = false\">\r\n                <!-- <sui-image src=\"static/images/avatar/large/matthew.png\" /> -->\r\n                <!-- :placeholder=\"`https://placeimg.com/300/${200 + item._id}/nature`\" -->\r\n                <sui-embed v-if=\"item.video_url\"\r\n                    :active=\"item._id === clicked\"\r\n                    icon=\"fas fa-film\"\r\n                    :id=\"item.video_id\"\r\n                    :placeholder=\"item.compressed ? `${BASE_URL}/${item._id}/files/${item.compressed}` : `https://placeimg.com/150/${100 + item._id}/nature`\"\r\n                    :source=\"item.video_provider\"\r\n                    :iframe=\"{ allowFullScreen: true, allowfullscreen: true, mozallowfullscreen: true, webkitallowfullscreen: true}\"\r\n                />\r\n                <v-card-media v-else-if=\"item.compressed\" :height=\"159.75\" :src=\"item.compressed ? `${BASE_URL}/${item._id}/files/${item.compressed}` : ''\" />\r\n                <v-card-media v-else :height=\"159.75\" :src=\"`https://placeimg.com/150/${100 + item._id}/nature`\" />\r\n\r\n                <sui-card-content>\r\n                    <sui-card-header :alt=\"item.title\" :class=\"item._id === active ? 'accent--text' : 'primary--text'\">{{ item.title }}</sui-card-header>\r\n                    <sui-card-meta><small>{{ new Date(parseInt(item.created)).toLocaleString() }}</small></sui-card-meta>\r\n\r\n                    <v-divider/>\r\n\r\n                    <sui-card-description v-html=\"item.text\"/>\r\n                        <!-- {{ item.text }} -->\r\n                </sui-card-content>\r\n                <sui-card-content extra>\r\n                    <div v-if=\"item.tags && item.tags.length\" style=\"overflow: hidden; white-space: nowrap; text-overflow: ellipsis; display: inline-block; max-width: 120px\">\r\n                        <v-icon class=\"mr-1 secondary--text\" :size=\"12\">fas fa-tags</v-icon>\r\n                        <small>{{ item.tags.reduce((str, item, inx, arr) => str = str + item + (inx === arr.length - 1 ? '' : ' | '), '') }}</small>\r\n                    </div>\r\n                    <v-btn slot=\"right\" @click.stop :to=\"`readnews:${item._id}`\" dark flat color=\"secondary\" icon small class=\"ma-0\"><v-icon small>fas fa-expand</v-icon></v-btn>\r\n                </sui-card-content>\r\n\r\n                <v-speed-dial class=\"card-dial\"\r\n                        v-if=\"auth.group === 'admins'\"\r\n                        absolute\r\n                        v-model=\"fab[item._id]\"\r\n                        \r\n                        :bottom=\"bottom\"\r\n                        :right=\"right\"\r\n                        :left=\"left\"\r\n                        :direction=\"direction\"\r\n                        :open-on-hover=\"hover\"\r\n                        :transition=\"transition\"\r\n                        v-show=\"item._id === active\"\r\n                    >\r\n                    <!-- :style=\"fab[item._id] ? 'background-color: rgb(142, 36, 170)' : 'background-color: rgb(142, 36, 170, 0.5)'\" -->\r\n                        <v-btn\r\n                            slot=\"activator\"\r\n                            v-model=\"fab[item._id]\"\r\n                            \r\n                            dark\r\n                            fab\r\n                            small\r\n                            color=\"accent\"\r\n                            :style=\"!fab[item._id] && 'opacity: 0.5'\"\r\n                        >\r\n                            <v-icon>fas fa-chevron-down</v-icon>\r\n                            <v-icon>fas fa-chevron-up</v-icon>\r\n                        </v-btn>\r\n                        <v-btn\r\n                            icon\r\n                            dark\r\n                            small\r\n                            color=\"secondary\"\r\n                            @click=\"commit('SHOW_MODAL', { 'news': item })\"\r\n                            class=\"btn-icon-shadow\"\r\n                        >\r\n                            <v-tooltip left>\r\n                                <v-icon slot=\"activator\" :size=\"13\" style=\"margin-bottom: 1px\">fas fa-pen</v-icon>\r\n                                <span>Редактировать</span>\r\n                            </v-tooltip>\r\n                        </v-btn>\r\n                        <v-btn\r\n                            icon\r\n                            dark\r\n                            small\r\n                            color=\"error\"\r\n                            @click.native=\"commit('SHOW_MODAL', { 'news': item, options: { remove: true }})\"\r\n                            class=\"btn-icon-shadow\"\r\n                        >\r\n                            <v-tooltip left>\r\n                                <v-icon  slot=\"activator\" small>fas fa-times</v-icon>\r\n                                <span>Удалить</span>\r\n                            </v-tooltip>\r\n                        </v-btn>\r\n                    </v-speed-dial>\r\n\r\n            </sui-card>\r\n                \r\n        </v-flex>\r\n        <v-flex v-if=\"!filter.length\">\r\n            <sui-card class=\"elevation-0 not-found\">\r\n                <sui-card-content>\r\n                    <sui-card-header>{{ date ? `Новостей за ${new Date(date).toLocaleDateString()} не найдено` : '' }}</sui-card-header>\r\n                    <!-- <sui-card-meta><small>{{ new Date(date).toLocaleDateString() }}</small></sui-card-meta> -->\r\n                </sui-card-content>\r\n            </sui-card>\r\n        </v-flex>\r\n\r\n        <!-- <news-dialog @removed=\"removed\" @appended=\"appended\"/> -->\r\n    </widget>        \r\n</template>\r\n\r\n<script>\r\n    import Widget from './class_widget';\r\n    //import newsDialog from '../modals/news-dialog';\r\n\r\n    export default {\r\n        props: ['date'],\r\n        extends: Widget,\r\n        components: {\r\n            //newsDialog\r\n            //news: () => import('../modals/news'), DONT DO LIKE THIS, REGISTERED MULTIPLY SAME DIALOGS AND SHOWS THEM TOGETHER, USE REGISTER_MODAL INSTEAD\r\n        },\r\n        created() {\r\n            //this.commit('REGISTER_MODAL', 'news-dialog');\r\n        },\r\n        computed: {\r\n            filter() {\r\n                //debugger\r\n                let raw_data = this.raw_data;\r\n                this.date ? raw_data = this.raw_data.filter((item) => new Date(parseInt(item.created)).toDateString() === new Date(this.date).toDateString()) : raw_data = this.raw_data\r\n\r\n                return raw_data.sort((a, b) => b.created - a.created);\r\n            },\r\n        },\r\n        methods: {\r\n            tags(item) {\r\n                return item.tags.reduce((str, item, inx) => str = str + item, '')\r\n            },\r\n            onHover(id) {\r\n                this.value[id] = true;\r\n                this.active = id;\r\n            },\r\n        },\r\n        watch: {\r\n            'append': function(val) {\r\n                val && this.onHover(0);\r\n            }\r\n        },\r\n        data() {\r\n            return {\r\n                append: false,\r\n\r\n                active: false,\r\n                clicked: false,\r\n                value: {},\r\n                direction: 'bottom',\r\n                fab: {},\r\n                hover: true,\r\n                top: true,\r\n                right: true,\r\n                bottom: false,\r\n                left: false,\r\n                transition: 'slide-y-reverse-transition',\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .v-card, .ui.card {\r\n        margin: auto;\r\n    }\r\n\r\n    .card-dial {\r\n        margin-top: 16px;\r\n        padding-bottom: 6px;\r\n        /* z-index: 1; */\r\n    }\r\n\r\n    .top-dial {\r\n        margin-top: 24px;\r\n    }\r\n\r\n    .ui.card, .ui.card>:first-child {\r\n        border-radius: 0px!important;\r\n    }\r\n\r\n    .ui.card.not-found {\r\n        text-align: center;\r\n        width: inherit!important;\r\n        cursor: default;\r\n    }\r\n\r\n    .ui.card {\r\n        width: 200px!important;\r\n        cursor: pointer;\r\n    }\r\n    \r\n    .description {\r\n        min-height: 100px;\r\n        max-height: 100px;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .description {\r\n        position: relative;\r\n    }\r\n\r\n    .description:after {\r\n        left: 0;\r\n        position: absolute;\r\n        bottom: 0;  \r\n        height: 100%;\r\n        width: 100%;\r\n        content: \"\";\r\n        background: linear-gradient(to top,\r\n            rgba(255,255,255, 1) 0%, \r\n            rgba(255,255,255, 0) 100%\r\n        );\r\n        pointer-events: none; \r\n    }\r\n\r\n    .header {\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n    }\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./news.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./news.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./news.vue?vue&type=template&id=793203bf&scoped=true&\"\nimport script from \"./news.vue?vue&type=script&lang=js&\"\nexport * from \"./news.vue?vue&type=script&lang=js&\"\nimport style0 from \"./news.vue?vue&type=style&index=0&id=793203bf&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"793203bf\",\n  null\n  \n)\n\ncomponent.options.__file = \"news.vue\"\nexport default component.exports","import Base from '../class_base';\r\nimport {Cache} from 'axios-extensions';\r\n//import widget from './widgets/widget';\r\n\r\nexport default {\r\n    extends: Base,\r\n    components: {\r\n        widget: () => import('./widget')\r\n    },\r\n    data() {\r\n        return {\r\n            active: false\r\n        }\r\n    },\r\n    activated() {\r\n        //console.log('activated', this.entity);\r\n        this.active = true;\r\n        this.load();\r\n    },\r\n    deactivated() {\r\n        //console.log('deactivated', this.entity);\r\n        this.active = false;\r\n        //this.load();\r\n    },\r\n    methods: {\r\n        load() {\r\n            //debugger;\r\n            //console.log('LOADING:', this.entity);\r\n            this.active && this.execute({ endpoint: this.endpoint, method: 'get', cache: this.cache }); \r\n\r\n            if(this.auth.signed === 1 && this.auth.member) {\r\n                console.log('REGISTER EVENT:', `${this.auth.member}:update:${this.entity}`);\r\n\r\n                this.$socket.off(this.events.update);\r\n\r\n                let event = `${this.auth.member}:update:${this.entity}`;\r\n                let update = this.$socket.on(event, (data) => {\r\n                    //debugger\r\n                    this.onEvent(data);\r\n\r\n                });\r\n\r\n                this.events.update = event;\r\n            }\r\n        },\r\n        onEvent(data) {\r\n            console.log('SOCKET UPDATE DATA:', data);\r\n                    \r\n            this.commit('SET_ENTITIES', { method: 'GET', ...data });\r\n        }\r\n    },\r\n    computed: {\r\n        cache() {\r\n            return true;\r\n        },\r\n        endpoint() {\r\n            return `${this.entity}${ this.component_id ? ':' + this.component_id : '' }`;\r\n        },\r\n        raw_data() {\r\n            return this.$store.state.entities[this.entity] ? Object.values(this.$store.state.entities[this.entity]) : [];\r\n        },\r\n        filter() {\r\n            return this.raw_data; //переопределить в компоненте если надо фильтровать данные\r\n        }\r\n    },\r\n    watch: {\r\n        'auth.signed': function(val, old) {\r\n            //console.log(`SIGN CHANGED on ${this.entity} from:`, old, 'TO:', val, 'EVENT');\r\n            //val < old && this.load();\r\n\r\n            //this.commit('RESET_CACHE');\r\n            val === 1 && this.load();\r\n            /* val === 1 && this.load();\r\n\r\n            if(val === 1 && this.auth.member) {\r\n                console.log('REGISTER EVENT:', `${this.auth.member}:update:${this.entity}`);\r\n\r\n                this.$socket.off(this.events.update);\r\n\r\n                let update = this.$socket.on(`${this.auth.member}:update:${this.entity}`, (data) => {\r\n                    //debugger\r\n                    this.onEvent(data);\r\n\r\n                });\r\n\r\n                this.events.update = update.id;\r\n            } */\r\n        },\r\n        'auth.member': function(val, old) {\r\n            //console.log(`${this.entity} MEMBER CHANGED from:`, old, 'TO:', val);\r\n            !val && this.$socket.off(this.events.update);\r\n        }\r\n    }\r\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./news.vue?vue&type=style&index=0&id=793203bf&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./news.vue?vue&type=style&index=0&id=793203bf&scoped=true&lang=css&\""],"sourceRoot":""}