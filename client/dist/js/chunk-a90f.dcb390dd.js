(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a90f","chunk-1c5c","4074"],{"2d97":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("widget",{staticStyle:{"align-items":"stretch"},attrs:{name:"новости ("+t.filter.length+")",column:""}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("v-layout",{staticClass:"ma-2"},[i("h2",{staticClass:"primary--text"},[i("v-icon",{staticClass:"mr-2 shadow",attrs:{color:"primary",medium:""}},[t._v("fas fa-exclamation-circle")]),t._v("\n                Содержание:\n            ")],1),"admins"===t.auth.group?i("v-btn",{staticClass:"top-dial",attrs:{absolute:"",right:"",dark:"",fab:"",color:"accent"},on:{click:function(e){t.commit("SHOW_MODAL",{"news-dialog":t.item})}}},[i("v-icon",{attrs:{size:18}},[t._v("fas fa-pen")])],1):t._e()],1)],1),i("v-divider",{staticClass:"mb-4",attrs:{slot:"divider"},slot:"divider"}),i("v-card",{staticStyle:{flex:"1"},attrs:{flat:""}},[i("v-card-text",[i("tree-list",{attrs:{"opened-icon":"far fa-folder-open","closed-icon":"far fa-folder","empty-icon":"far fa-copy",items:t.filter,"items-name":"children",entity:t.entities.content,selected:t.selected},on:{select:function(e){t.selected=arguments[0],t.$emit("select",t.selected)}}})],1)],1)],1)},a=[],n=i("a8bd"),o={extends:n["default"],components:{"tree-list":()=>i.e("chunk-f508").then(i.bind(null,"eb7e"))},computed:{filter(){this.selected||(this.selected=this.raw_data.length&&this.raw_data[0]._id,this.$emit("select",this.selected));let t=this.raw_data.filter(t=>!t.parent);return t}},data(){return{entity:"content",selected:void 0}}},c=o,r=(i("bdef"),i("2877")),d=Object(r["a"])(c,s,a,!1,null,"5ab4030a",null);d.options.__file="articlescontent.vue";e["default"]=d.exports},4074:function(t,e,i){"use strict";i.r(e),e["default"]={data(){let[t,e]=this.$options._componentTag.split("_");return{loaded:!1,events:{},entity:t,component_name:this.$options._componentTag,component_id:e||this.$store.state.route.id}},async created(){},watch:{"auth.signed":function(t,e){}},methods:{execute(...t){return this.$store._actions.execute[0](...t)},commit(...t){return this.$store.commit(...t)},registerComponent(t){this.commit("REGISTER_COMPONENT",t)}},computed:{state(){return this.$store.state},entities(){return this.$store.state.entities},auth(){return this.state.auth||{}},authenticated(){return!!this.auth&&(this.auth.signed&&0!==this.auth.signed)},route(){return this.state.route},BASE_URL(){return this.state.BASE_URL}}}},a2b0:function(t,e,i){},a8bd:function(t,e,i){"use strict";i.r(e);var s=i("4074");e["default"]={extends:s["default"],components:{widget:()=>i.e("chunk-6ce8").then(i.bind(null,"a739"))},data(){return{active:!1}},activated(){this.active=!0,this.load()},deactivated(){this.active=!1},methods:{load(){if(this.active&&this.execute({endpoint:this.endpoint,method:"get",cache:this.cache}),1===this.auth.signed&&this.auth.member){console.log("REGISTER EVENT:",`${this.auth.member}:update:${this.entity}`),this.$socket.off(this.events.update);let t=`${this.auth.member}:update:${this.entity}`;this.$socket.on(t,t=>{this.onEvent(t)});this.events.update=t}},onEvent(t){console.log("SOCKET UPDATE DATA:",t),this.commit("SET_ENTITIES",{method:"GET",...t})}},computed:{cache(){return!0},endpoint(){return`${this.entity}${this.component_id?":"+this.component_id:""}`},raw_data(){return this.$store.state.entities[this.entity]?Object.values(this.$store.state.entities[this.entity]):[]},filter(){return this.raw_data}},watch:{"auth.signed":function(t,e){1===t&&this.load()},"auth.member":function(t,e){!t&&this.$socket.off(this.events.update)}}}},bdef:function(t,e,i){"use strict";var s=i("a2b0"),a=i.n(s);a.a}}]);
//# sourceMappingURL=chunk-a90f.dcb390dd.js.map